<!DOCTYPE html>
<html lang="de">

    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>Multimedia Processing</title>
        <link rel="stylesheet" href="css/bootstrap.min.css" />
        <link rel="stylesheet" href="css/main.css" />
        <script src="js/jquery-2.1.4.min.js"></script>
        <script src="js/bootstrap.min.js"></script>
    </head>

    <body>
        <nav class="navbar navbar-default">
            <div class="container-fluid">
                <div class="navbar-header">
                    <a class="navbar-brand" href="#">Multimedia Processing</a>
                </div>
                <div>
                    <ul class="nav navbar-nav">
                        <li><a href="index.html">Übung 1</a></li>
                        <li><a href="ex2.html">Übung 2</a></li>
                        <li><a href="ex3.html">Übung 3</a></li>
                        <li><a href="#"><s>Übung 4</s></a></li>
                        <li class="active"><a href="ex5.html">Übung 5</a></li>
                    </ul>
                </div>
            </div>
        </nav>

        <div class="row container">
            <p class="lead">
                <em>Lösungen von Felix Maulwurf und Michael Duve</em>
            </p>
        </div>
        <div id="accordion" class="container panel-group">
            <div class="panel panel-default">
                <div class="panel-heading">
                    <h3 class="panel-title">
                        <a data-toggle="collapse" data-parent="#accordion" data-target="#collapseOne"
                           href="#collapseOne">
                            Teilaufgabe 1
                        </a>
                    </h3>
                </div>
                <div id="collapseOne" class="panel-collapse collapse in">
                    <div class="panel-body">
                        <h4>Aufgabenbeschreibung:</h4>
                        <p>
                            In dieser Übung beschäftigen wir uns mit der Modell der Spracherzeugung nach dem Quelle-Filter-Prinzip und seiner Nutzung bei der Sprachcodierung und -kompression. Bei diesem Modell wird das Sprachsignal in Anteile zerlegt, die von den Stimmbändern als
                            Oszillator (bei stimmhaften Lauten) oder einer rauschhaften Anregung (bei stimmlosen Lauten) herrühren, d.h. der "Quelle", und solche, die aus der akustischen Filterung der "Quelle" durch den Vokaltrakt entstehen, dem "Filter".
                            Mit Hilfe der sogenannten Linearen Prädiktion (LPC) lässt sich sich das Sprachsignal in der beschriebenen Weise in Quelle und Filter aufspalten. Die Software PRAAT stellt den LPC-Algorithmus zur Verfügung, den wir für diese
                            Übung nutzen wollen. Das Filter, das den Vokaltrakt beschreibt, ist ein digitales Filter, wie wir es in der Vorlesung besprochen haben und wird durch seine Ordnung gekennzeichnet, d.h. die Anzahl seiner Verzögerungsglieder.
                        </p>
                    </div>
                </div>
            </div>
            <div class="panel panel-default">
                <div class="panel-heading">
                    <h3 class="panel-title">
                        <a data-toggle="collapse" data-parent="#accordion" data-target="#collapseTwo"
                           href="#collapseTwo">
                            Teilaufgabe 2
                        </a>
                    </h3>
                </div>
                <div id="collapseTwo" class="panel-collapse collapse in">
                    <div class="panel-body">
                        <h4>Aufgabenbeschreibung:</h4>
                        <p>
                            Als erstes lesen wir mit [Read] in PRAAT unsere Sprachdatei ein. Dann wählen wir "Formants&amp;LPC->To LPC (autocorrelation)". Die anderen Verfahren, die PRAAT noch anbietet, unterscheiden sich nur geringfügig in der Methode der Berechnung der Filter-Koeffizienten.
                            Im Einstelldialog sind besonders die Punkte "Prediction Order" (Ordnung des Filters) und "Analysis width" (Framebreite bei der Analyse) von Interesse. Diese wollen wir in dieser Aufgabe variieren. Zusätzlich zu den von PRAAT
                            angebotenen Standardwerten von Order=16/Analysis Width=25ms (kurz: 16/25) werden wir Analysen bei Ordnungen von 10, 6 und 1 durchführen, sowie Framelängen von 50 und 100 ms untersuchen. "Time step" (die "Vorschubbreite" der
                            Analyse) setzen wir auf denselben Wert wie "Analysis width", d.h. wir erlauben kein Überlappen von benachbarten Frames.
                        </p>
                        <p>
                            Um die verschiedenen Varianten nicht zu verwechseln, geben wir den einzelnen LPC-Objekten mit 'Rename' entsprechende Namen.
                        </p>
                        <p>
                            Nachdem die verschiedenen LPC-Objekte kreiert wurden, führen wir zunächst eine inverse Filterung des Sprachsignals durch, mit der wir theoretisch die "Quelle" zurückgewinnen (Sound und LPC (16/25) gemeinsam anwählen, "Filter (inverse)"). Das entstehende
                            Signal, das auch als "Residual"-Signal bezeichnet wird, betrachten wir im Edit-Fenster. Wie unterscheiden sich die Spektren vom Original, wie ist die Restverständlichkeit der ursprünglichen Sprache? (Spektrogramme von Original
                            und Residual-Signal ins Protokoll) Nun gewinnen wir das ursprüngliche Signal wieder zurück (Rekonstruktion), indem wir das Residuum mit dem dazugehörigen LPC-Objekt (16/25) filtern (Residuum und LPC gemeinsam anwählen, "Filter",
                            "Use LPC Gain" nicht ankreuzen!).
                        </p>
                        <!-- content -->
                        <h4>Aufgabenlösung:</h4>
                        <div class="row">
                            <div class="col-md-4">
                                <figure>
                                    <img src="praat/ex5/original.png" alt="" />
                                    <figcaption>
                                        Screenshot Original
                                    </figcaption>
                                </figure>
                                <figure>
                                    <audio controls>
                                        <source src="praat/ex5/original.wav" type="audio/wav">
                                    </audio>
                                    <figcaption>
                                        Aufnahme Original
                                    </figcaption>
                                </figure>
                            </div>
                            <div class="col-md-4">
                                <figure>
                                    <img src="praat/ex5/16_25_residuum.png" alt="" />
                                    <figcaption>
                                        Screenshot 16_25 Residuum
                                    </figcaption>
                                </figure>
                                <figure>
                                    <audio controls>
                                        <source src="praat/ex5/residuum-16_25.wav" type="audio/wav">
                                    </audio>
                                    <figcaption>
                                        Residuum 16_25
                                    </figcaption>
                                </figure>
                            </div>
                            <div class="col-md-4">
                                <figure>
                                    <img src="praat/ex5/16_25_resynthese.png" alt="" />
                                    <figcaption>
                                        Screenshot Resynthese 16_25
                                    </figcaption>
                                </figure>
                                <figure>
                                    <audio controls>
                                    <source src="praat/ex5/16_25-resynthese.wav" type="audio/wav">
                                </audio>
                                    <figcaption>
                                        Resynthese 16_25
                                    </figcaption>
                                </figure>
                            </div>
                        </div>
                        <p>
                            Es ist visuell und akustisch kein Unterschied wahrzunehmen. Marginal ist bestimmt das Signal nicht deckungsgleich, aber Ohren und Augen nehmen die Unterschiede nicht wahr.
                        </p>
                    </div>
                </div>
                <div class="panel panel-default">
                    <div class="panel-heading">
                        <h3 class="panel-title">
                        <a data-toggle="collapse" data-parent="#accordion" data-target="#collapseThree"
                           href="#collapseThree">
                            Teilaufgabe 3
                        </a>
                    </h3>
                    </div>
                    <div id="collapseThree" class="panel-collapse collapse in">
                        <div class="panel-body">
                            <h4>Aufgabenbeschreibung:</h4>
                            <p>
                                Das Residual-Signal dient uns jetzt zum Testen der anderen LPC-Objekte mit den verschlechterten Parametern. Auch hier wählen wir das Residuum und das gewünschte LPC-Objekt an und filtern wieder. Vergleiche die Qualität der einzelnen Varianten mit dem
                                Original! Wie unterscheiden sich die Beispiele, bei denen die Filter-Ordnung variiert wurde, wie solche, bei denen die Framebreite variiert wurde? Bei welcher Kombination ist die Sprachverständlichkeit nicht mehr akzeptabel?
                            </p>
                            <!-- content -->
                            <h4>Aufgabenlösung:</h4>
                            <div class="row">
                                <div class="col-md-4">
                                    <figure>
                                        <img src="praat/ex5/16_25.png" alt="" />
                                        <figcaption>
                                            Screenshot Resynthese 16_25
                                        </figcaption>
                                    </figure>
                                    <figure>
                                        <audio controls>
                                        <source src="praat/ex5/16_25-resynthese.wav" type="audio/wav">
                                    </audio>
                                        <figcaption>
                                            Resynthese 16_25
                                        </figcaption>
                                    </figure>
                                </div>
                                <div class="col-md-4">
                                    <figure>
                                        <img src="praat/ex5/16_50.png" alt="" />
                                        <figcaption>
                                            Screenshot Resynthese 16_50
                                        </figcaption>
                                    </figure>
                                    <figure>
                                        <audio controls>
                                        <source src="praat/ex5/16_50-resynthese.wav" type="audio/wav">
                                    </audio>
                                        <figcaption>
                                            Resynthese 16_50
                                        </figcaption>
                                    </figure>
                                </div>
                                <div class="col-md-4">
                                    <figure>
                                        <img src="praat/ex5/16_100.png" alt="" />
                                        <figcaption>
                                            Screenshot Resynthese 16_100
                                        </figcaption>
                                    </figure>
                                    <figure>
                                        <audio controls>
                                        <source src="praat/ex5/16_100-resynthese.wav" type="audio/wav">
                                    </audio>
                                        <figcaption>
                                            Resynthese 16_100
                                        </figcaption>
                                    </figure>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-4">
                                    <figure>
                                        <img src="praat/ex5/10_25.png" alt="" />
                                        <figcaption>
                                            Screenshot Resynthese 10_25
                                        </figcaption>
                                    </figure>
                                    <figure>
                                        <audio controls>
                                        <source src="praat/ex5/10_25-resynthese.wav" type="audio/wav">
                                    </audio>
                                        <figcaption>
                                            Resynthese 10_25
                                        </figcaption>
                                    </figure>
                                </div>
                                <div class="col-md-4">
                                    <figure>
                                        <img src="praat/ex5/10_50.png" alt="" />
                                        <figcaption>
                                            Screenshot Resynthese 10_50
                                        </figcaption>
                                    </figure>
                                    <figure>
                                        <audio controls>
                                        <source src="praat/ex5/10_50-resynthese.wav" type="audio/wav">
                                    </audio>
                                        <figcaption>
                                            Resynthese 10_50
                                        </figcaption>
                                    </figure>
                                </div>
                                <div class="col-md-4">
                                    <figure>
                                        <img src="praat/ex5/10_100.png" alt="" />
                                        <figcaption>
                                            Screenshot Resynthese 10_100
                                        </figcaption>
                                    </figure>
                                    <figure>
                                        <audio controls>
                                        <source src="praat/ex5/10_100-resynthese.wav" type="audio/wav">
                                    </audio>
                                        <figcaption>
                                            Resynthese 10_100
                                        </figcaption>
                                    </figure>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-4">
                                    <figure>
                                        <img src="praat/ex5/6_25.png" alt="" />
                                        <figcaption>
                                            Screenshot Resynthese 6_25
                                        </figcaption>
                                    </figure>
                                    <figure>
                                        <audio controls>
                                        <source src="praat/ex5/6_25-resynthese.wav" type="audio/wav">
                                    </audio>
                                        <figcaption>
                                            Resynthese 6_25
                                        </figcaption>
                                    </figure>
                                </div>
                                <div class="col-md-4">
                                    <figure>
                                        <img src="praat/ex5/6_50.png" alt="" />
                                        <figcaption>
                                            Screenshot Resynthese 6_50
                                        </figcaption>
                                    </figure>
                                    <figure>
                                        <audio controls>
                                        <source src="praat/ex5/6_50-resynthese.wav" type="audio/wav">
                                    </audio>
                                        <figcaption>
                                            Resynthese 6_50
                                        </figcaption>
                                    </figure>
                                </div>
                                <div class="col-md-4">
                                    <figure>
                                        <img src="praat/ex5/6_100.png" alt="" />
                                        <figcaption>
                                            Screenshot Resynthese 6_100
                                        </figcaption>
                                    </figure>
                                    <figure>
                                        <audio controls>
                                        <source src="praat/ex5/6_100-resynthese.wav" type="audio/wav">
                                    </audio>
                                        <figcaption>
                                            Resynthese _100
                                        </figcaption>
                                    </figure>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-4">
                                    <figure>
                                        <img src="praat/ex5/1_25.png" alt="" />
                                        <figcaption>
                                            Screenshot Resynthese 1_25
                                        </figcaption>
                                    </figure>
                                    <figure>
                                        <audio controls>
                                        <source src="praat/ex5/1_25-resynthese.wav" type="audio/wav">
                                    </audio>
                                        <figcaption>
                                            Resynthese 1_25
                                        </figcaption>
                                    </figure>
                                </div>
                                <div class="col-md-4">
                                    <figure>
                                        <img src="praat/ex5/1_50.png" alt="" />
                                        <figcaption>
                                            Screenshot Resynthese 1_50
                                        </figcaption>
                                    </figure>
                                    <figure>
                                        <audio controls>
                                        <source src="praat/ex5/1_50-resynthese.wav" type="audio/wav">
                                    </audio>
                                        <figcaption>
                                            Resynthese 1_50
                                        </figcaption>
                                    </figure>
                                </div>
                                <div class="col-md-4">
                                    <figure>
                                        <img src="praat/ex5/1_100.png" alt="" />
                                        <figcaption>
                                            Screenshot Resynthese 1_100
                                        </figcaption>
                                    </figure>
                                    <figure>
                                        <audio controls>
                                        <source src="praat/ex5/1_100-resynthese.wav" type="audio/wav">
                                    </audio>
                                        <figcaption>
                                            Resynthese 1_100
                                        </figcaption>
                                    </figure>
                                </div>
                            </div>
                        </div>
                        <p>
                            Die Qualität nimmt mit Reduktion der Anzahl der Koeffizienten ab und ein Rauschen ist im Spektrum ersichtlich. Das Signal bekommt Unterbrechungen, welche mit zunehmender Framelänge länger werden, die auftreten, weil die ursprüngliche Framelänge nicht
                            eingehalten wird. Ein akustischer Unterschied ist im Vergleich vom Original zur besten Version (Ordnung 1 und Framelänge 25ms) nicht hörbar.
                        </p>
                    </div>
                </div>
                <div class="panel panel-default">
                    <div class="panel-heading">
                        <h3 class="panel-title">
                        <a data-toggle="collapse" data-parent="#accordion" data-target="#collapseFour"
                           href="#collapseFour">
                            Teilaufgabe 4
                        </a>
                    </h3>
                    </div>
                    <div id="collapseFour" class="panel-collapse collapse in">
                        <div class="panel-body">
                            <h4>Aufgabenbeschreibung:</h4>
                            <p>
                                Nun wollen wir die Anregung (Quelle) verändern. Dafür habe ich zwei Signale bereitgestellt, weißes Rauschen und einen 100Hz-Pulse Train, einen obertonreiches Signal mit Grundfrequenz 100Hz
                            </p>
                            <ul>
                                <li><a href="praat/ex5/pulsetrain.wav" target="_blank">pulsetrain.wav</a></li>
                                <li><a href="praat/ex5/whitenoise.wav" target="_blank">whitenoise.wav</a></li>
                            </ul>
                            <p>
                                Wenn wir das Rauschen mit dem LPC-Objekt filtern (jetzt "Use LPC Gain" anwählen), bekommen wir so etwas wie Flüstersprache, beim Pulse Train eine Roboterstimme. Abschließend werden wir auch noch eine Musikdatei als Anregung benutzen, was einen Vocodereffekt
                                bewirken sollte. Am besten eignen sich hier flächige, eher statische Sounds wie Synthesizerakkorde, da der Rhythmus vom Sprachsignal kommen soll. Für die 12 Qualitäten (also Filter-Ordnungen 16, 10, 6, 1 kombiniert mit
                                Framebreiten 25, 50 und 100ms) berechnen wir die Datenraten. Dazu machen wir uns Folgendes klar: Übertragen werden müssen mindestens je Analyseblock (also z.B. je 25ms) die Koeffizienten (Zahl entspricht der Filterordnung)
                                und die Grundfrequenz f0. Setze hier jeweils pro Zahlenwert 16bit an. Vergleiche diese Datenrate mit der ursprünglichen PCM-Datenrate der Sprachdatei (wie in Übung 1 berechnet).
                            </p>
                            <!-- content -->
                            <h4>Aufgabenlösung:</h4>
                            <div class="row">
                                <div class="col-md-6">
                                    <figure>
                                        <img src="praat/ex5/pulse.png" alt="" />
                                        <figcaption>
                                            Screenshot Pulsetrain
                                        </figcaption>
                                    </figure>
                                    <figure>
                                        <audio controls>
                                            <source src="praat/ex5/16_25-pulsetrain.wav" type="audio/wav">
                                        </audio>
                                        <figcaption>
                                            16_25 Pulsetrain Resynthese
                                        </figcaption>
                                    </figure>
                                </div>
                                <div class="col-md-6">
                                    <figure>
                                        <img src="praat/ex5/whitenoise.png" alt="" />
                                        <figcaption>
                                            Screenshot Whitenoise
                                        </figcaption>
                                    </figure>
                                    <figure>
                                        <audio controls>
                                            <source src="praat/ex5/16_25-whitenoise.wav" type="audio/wav">
                                        </audio>
                                        <figcaption>
                                            16_25 Whitenoise Resynthese
                                        </figcaption>
                                    </figure>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-6">
                                    <figure>
                                        <img src="praat/ex5/vocoder.png" alt="" />
                                        <figcaption>
                                            Screenshot Vocoder
                                        </figcaption>
                                    </figure>
                                    <figure>
                                        <audio controls>
                                            <source src="praat/ex5/coldplay-paradise.wav" type="audio/wav">
                                        </audio>
                                        <figcaption>
                                            Musik Original: Coldplay - Paradise
                                        </figcaption>
                                    </figure>
                                </div>
                                <div class="col-md-6">
                                    <figure>
                                        <img src="praat/ex5/coldplay.png" alt="" />
                                        <figcaption>
                                            Screenshot Coldplay
                                        </figcaption>
                                    </figure>
                                    <figure>
                                        <audio controls>
                                            <source src="praat/ex5/16_25-vocoder.wav" type="audio/wav">
                                        </audio>
                                        <figcaption>
                                            16_25 Vocoder Resynthese
                                        </figcaption>
                                    </figure>
                                </div>
                            </div>
                            <h5>
                                Berechnung der Datenraten
                            </h5>
                            <p>
                                Formel: Anzahl der Frames pro Sekunde * (Anzahl Koeffizienten * 16bit + Grundfrequenz) = Datenrate
                            </p>
                            <p>
                                Beispiel: 40 * (16 * 16bit + 16bit) = 10880 bit/s = 10.88 kbit/s
                            </p>
                            <table class="table">
                                <thead>
                                    <tr>
                                        <th></th>
                                        <th class="text-center" colspan="4">Anzahl der Koeffizienten</th>
                                    </tr>
                                    <tr>
                                        <th>Frames (1/s)</th>
                                        <th>16</th>
                                        <th>10</th>
                                        <th>6</th>
                                        <th>1</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>40</td>
                                        <td>10880 bit/s</td>
                                        <td>7040 bit/s</td>
                                        <td>4480 bit/s</td>
                                        <td>1280 bit/s</td>
                                    </tr>
                                    <tr>
                                        <td>20</td>
                                        <td>5440 bit/s</td>
                                        <td>3520 bit/s</td>
                                        <td>2240 bit/s</td>
                                        <td>640 bit/s</td>
                                    </tr>
                                    <tr>
                                        <td>10</td>
                                        <td>2720 bit/s</td>
                                        <td>1760 bit/s</td>
                                        <td>1120 bit/s</td>
                                        <td>320 bit/s</td>
                                    </tr>
                                </tbody>
                            </table>
                            <p>
                                Datenrate des Originals (Abtastfrequenz * Auflösung): 16kHz * 16bit = 256kbit/s = 256000bit/s
                            </p>
                            <p>
                                Sogar die Resynthese mit der besten Qualität und den meisten Frames hat eine um ca. 23,5% reduzierte Datenrate gegenüber dem Original. Die hörbare Qualität leidet darunter kaum. Das schlechteste Signal aus der Testreihe (Ordnung 1 und Framelänge 100ms)
                                ist zwar schwer zu verstehen, aber spart 800% in der Datenrate. Es macht also durchaus Sinn, dass Skype und andere Dienste die Datenrate reduzieren, um effizienter zu arbeiten.
                            </p>
                        </div>
                    </div>
                </div>

                <script src="js/app.js"></script>
            </div>
    </body>

</html>
